<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Installation and Configuration &mdash; NDPP Documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="NDPP Documentation" href="../index.html" />
    <link rel="up" title="User’s Guide" href="index.html" />
    <link rel="next" title="2. Writing XML Input Files" href="input.html" />
    <link rel="prev" title="User’s Guide" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="input.html" title="2. Writing XML Input Files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="User’s Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">NDPP Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ndpp_small.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. Installation and Configuration</a><ul>
<li><a class="reference internal" href="#building-from-source">1.1. Building from Source</a><ul>
<li><a class="reference internal" href="#prerequisites">1.1.1. Prerequisites</a></li>
<li><a class="reference internal" href="#obtaining-the-source">1.1.2. Obtaining the Source</a></li>
<li><a class="reference internal" href="#build-configuration">1.1.3. Build Configuration</a></li>
<li><a class="reference internal" href="#compiling-on-linux-and-mac-os-x">1.1.4. Compiling on Linux and Mac OS X</a></li>
<li><a class="reference internal" href="#compiling-on-windows">1.1.5. Compiling on Windows</a><ul>
<li><a class="reference internal" href="#using-cygwin">1.1.5.1. Using Cygwin</a></li>
<li><a class="reference internal" href="#using-mingw">1.1.5.2. Using MinGW</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cross-section-configuration">1.2. Cross Section Configuration</a><ul>
<li><a class="reference internal" href="#using-endf-b-vii-1-cross-sections-from-nndc">1.2.1. Using ENDF/B-VII.1 Cross Sections from NNDC</a></li>
<li><a class="reference internal" href="#using-jeff-cross-sections-from-oecd-nea">1.2.2. Using JEFF Cross Sections from OECD/NEA</a></li>
<li><a class="reference internal" href="#using-cross-sections-from-mcnp">1.2.3. Using Cross Sections from MCNP</a></li>
<li><a class="reference internal" href="#using-cross-sections-from-serpent">1.2.4. Using Cross Sections from Serpent</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-ndpp">1.3. Running NDPP</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">User&#8217;s Guide</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="input.html"
                        title="next chapter">2. Writing XML Input Files</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/usersguide/install.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation-and-configuration">
<span id="usersguide-install"></span><h1>1. Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-from-source">
<h2>1.1. Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prerequisites">
<h3>1.1.1. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<div class="admonition-required admonition">
<p class="first admonition-title">Required</p>
<ul class="last">
<li><p class="first">A Fortran compiler such as <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a></p>
<p>In order to compile NDPP, you will need to have a Fortran compiler
installed on your machine. Since a number of Fortran 2003/2008 features
are used in the code, it is recommended that you use the latest version of
whatever compiler you choose. For <a class="reference external" href="http://gcc.gnu.org/wiki/GFortran">gfortran</a>, it is necessary to use
version 4.6.0 or above.</p>
<p>If you are using Debian or a Debian derivative such as Ubuntu, you can
install the gfortran compiler using the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install gfortran
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition-optional admonition">
<p class="first admonition-title">Optional</p>
<ul class="last">
<li><p class="first">An MPI implementation for distributed-memory parallel runs</p>
</li>
<li><p class="first">This feature is not yet implemented*</p>
<p>To compile with support for parallel runs on a distributed-memory
architecture, you will need to have a valid implementation of MPI
installed on your machine. The code has been tested and is known to work
with the latest versions of both <a class="reference external" href="http://www.open-mpi.org">OpenMPI</a> and <a class="reference external" href="http://www.mpich.org">MPICH</a>. Note that if using
OpenMPI, make sure that &#8211;with-mpi-f90-size is not set to medium or large
since this may prevent MPI calls from completing successfully in
NDPP. OpenMPI and/or MPICH can be installed on Debian derivatives
with:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install mpich2 libmpich2-dev
sudo apt-get install openmpi1.6-bin libopenmpi1.6-dev
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> Library for portable binary output format</p>
<p>To compile with support for <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> output (highly recommended), you will
need to have HDF5 installed on your computer. The installed version will
need to have been compiled with the same compiler you intend to compile
NDPP with.</p>
</li>
<li><p class="first"><a class="reference external" href="http://git-scm.com">git</a> version control software for obtaining source code</p>
</li>
</ul>
</div>
</div>
<div class="section" id="obtaining-the-source">
<h3>1.1.2. Obtaining the Source<a class="headerlink" href="#obtaining-the-source" title="Permalink to this headline">¶</a></h3>
<p>All NDPP source code is hosted on <a class="reference external" href="https://github.com/ndpp/ndpp">GitHub</a>. You can download the source code
directly from GitHub or, if you have the <a class="reference external" href="http://git-scm.com">git</a> version control software installed
on your computer, you can use git to obtain the source code. The latter method
has the benefit that it is easy to receive updates directly from the GitHub
repository. With git installed and setup, the following command will download
the full source code from the GitHub repository:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git@ndpp.org:ndpp/ndpp.git
</pre></div>
</div>
<p>By default, the cloned repository will be set to the development branch. To
switch to the source of the latest stable release, run the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ndpp/src
git checkout master
</pre></div>
</div>
</div>
<div class="section" id="build-configuration">
<h3>1.1.3. Build Configuration<a class="headerlink" href="#build-configuration" title="Permalink to this headline">¶</a></h3>
<p>All configuration for NDPP is done within the Makefile located in
<tt class="docutils literal"><span class="pre">src/Makefile</span></tt>. In the Makefile, you will see that there are a number of User
Options which can be changed. It is recommended that you do not change anything
else in the Makefile unless you are experienced with compiling and building
software using Makefiles. The following parameters can be set from the User
Options sections in the Makefile:</p>
<dl class="docutils">
<dt>COMPILER</dt>
<dd>This variable tells the Makefile which compiler to use. Valid options are
gnu, and intel The default is gnu (gfortran).</dd>
<dt>DEBUG</dt>
<dd>Enables debugging when compiling. The flags added are dependent on which
compiler is used.</dd>
<dt>PROFILE</dt>
<dd>Enables profiling using the GNU profiler, gprof.</dd>
<dt>OPTIMIZE</dt>
<dd>Enables high-optimization using compiler-dependent flags. For gfortran and
Intel Fortran, this compiles with -O3.</dd>
<dt>MPI</dt>
<dd>Enables parallel runs using the Message Passing Interface. The MPI_DIR
variable should be set to the base directory of the MPI implementation.</dd>
<dt>OPENMP</dt>
<dd>Enables shared-memory parallelism using the OpenMP API. The Fortran compiler
must support OpenMP.</dd>
<dt>HDF5</dt>
<dd>Enables HDF5 output in addition to normal screen and text file output. The
HDF5_DIR variable should be set to the base directory of the HDF5
installation.
* This feature is not yet implemented*</dd>
</dl>
<p>It is also possible to change these options from the command line itself. For
example, if you want to compile with DEBUG turned on without actually change the
Makefile, you can enter the following from a terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>make DEBUG=yes
</pre></div>
</div>
</div>
<div class="section" id="compiling-on-linux-and-mac-os-x">
<h3>1.1.4. Compiling on Linux and Mac OS X<a class="headerlink" href="#compiling-on-linux-and-mac-os-x" title="Permalink to this headline">¶</a></h3>
<p>To compile NDPP on Linux or Max OS X, run the following commands from within
the root directory of the source code:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>src
make
sudo make install
</pre></div>
</div>
<p>This will build an executable named <tt class="docutils literal"><span class="pre">ndpp</span></tt> and install it (by default in
/usr/local/bin).</p>
</div>
<div class="section" id="compiling-on-windows">
<h3>1.1.5. Compiling on Windows<a class="headerlink" href="#compiling-on-windows" title="Permalink to this headline">¶</a></h3>
<div class="section" id="using-cygwin">
<h4>1.1.5.1. Using Cygwin<a class="headerlink" href="#using-cygwin" title="Permalink to this headline">¶</a></h4>
<p>One option for compiling NDPP on a Windows operating system is to use <a class="reference external" href="http://cygwin.com/">Cygwin</a>,
a Linux-like environment for Windows. You will need to first <a class="reference external" href="http://cygwin.com/setup.exe">install
Cygwin</a>. When you are asked to select packages, make sure the following are
selected:</p>
<ul class="simple">
<li>Devel: gcc4-core</li>
<li>Devel: gcc4-fortran</li>
<li>Devel: make</li>
</ul>
<p>If you plan on obtaining the source code directly using git, select the
following packages:</p>
<ul class="simple">
<li>Devel: git</li>
<li>Devel: git-completion (Optional)</li>
<li>Devel: gitk (Optional)</li>
</ul>
<p>In order to use the Python scripts provided with NDPP, you will also need to
install Python. This can be done within Cygwin or directly in Windows. To
install within Cygwin, select the following packages:</p>
<ul class="simple">
<li>Python: python (Version &gt; 2.7 recommended)</li>
</ul>
<p>Once you have obtained the source code, run the following commands from within
the source code root directory:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>src
make
</pre></div>
</div>
<p>This will build an executable named <tt class="docutils literal"><span class="pre">ndpp</span></tt>.</p>
</div>
<div class="section" id="using-mingw">
<h4>1.1.5.2. Using MinGW<a class="headerlink" href="#using-mingw" title="Permalink to this headline">¶</a></h4>
<p>An alternate option for installing NDPP on Windows is using <a class="reference external" href="http://www.mingw.org">MinGW</a>, which
stands for Minimalist GNU for Windows. An executable for installing the MinGW
distribution is available on <a class="reference external" href="http://sourceforge.net/projects/mingw">SourceForge</a>. When installing MinGW, make sure the
following components are selected:</p>
<ul class="simple">
<li>MinGW Compiler Suite: Fortran Compiler</li>
<li>MSYS Basic System</li>
</ul>
<p>Once MinGW is installed, copy the NDPP source distribution to your MinGW home
directory (usually C:\MinGW\msys\1.0\home\YourUsername). Once you have
the source code in place, run the following commands from within the MinGW shell
in the root directory of the NDPP distribution:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>src
make
</pre></div>
</div>
<p>This will build an executable named <tt class="docutils literal"><span class="pre">ndpp</span></tt>.</p>
</div>
</div>
</div>
<div class="section" id="cross-section-configuration">
<h2>1.2. Cross Section Configuration<a class="headerlink" href="#cross-section-configuration" title="Permalink to this headline">¶</a></h2>
<p>In order to run a simulation with NDPP, you will need cross section data for
each nuclide in your problem. Since NDPP uses ACE format cross sections, you
can use nuclear data that was processed with <a class="reference external" href="http://t2.lanl.gov/nis/codes.shtml">NJOY</a>, such as that distributed
with <a class="reference external" href="http://mcnp.lanl.gov">MCNP</a> or <a class="reference external" href="http://montecarlo.vtt.fi">Serpent</a>. Several sources provide free processed ACE data as
described below. The TALYS-based evaluated nuclear data library, <a class="reference external" href="ftp://ftp.nrg.eu/pub/www/talys/tendl2012/tendl2012.html">TENDL</a>, is also
openly available in ACE format.</p>
<p>In the following discussion, note that the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file can be
the same as is used by <a class="reference external" href="https://github.com/mit-crpg/openmc">OpenMC</a>.  Therefore, these steps can be skipped if
<a class="reference external" href="https://github.com/mit-crpg/openmc">OpenMC</a> is currently installed on the system.</p>
<div class="section" id="using-endf-b-vii-1-cross-sections-from-nndc">
<h3>1.2.1. Using ENDF/B-VII.1 Cross Sections from NNDC<a class="headerlink" href="#using-endf-b-vii-1-cross-sections-from-nndc" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.nndc.bnl.gov/endf/b7.1/acefiles.html">NNDC</a> provides ACE data from the ENDF/B-VII.1 neutron and thermal scattering
sublibraries at four temperatures processed using <a class="reference external" href="http://t2.lanl.gov/nis/codes.shtml">NJOY</a>. To use this data with
NDPP, a script is provided with NDPP that will automatically download,
extract, and set up a configuration file:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>ndpp/data
python get_nndc_data.py
</pre></div>
</div>
<p>At this point, you should set the <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt> environment variable
to the absolute path of the file <tt class="docutils literal"><span class="pre">ndpp/data/nndc/cross_sections.xml</span></tt>.</p>
</div>
<div class="section" id="using-jeff-cross-sections-from-oecd-nea">
<h3>1.2.2. Using JEFF Cross Sections from OECD/NEA<a class="headerlink" href="#using-jeff-cross-sections-from-oecd-nea" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.oecd-nea.org">NEA</a> provides processed ACE data from the <a class="reference external" href="http://www.oecd-nea.org/dbdata/jeff/">JEFF</a> nuclear library upon
request. A DVD of the data can be requested <a class="reference external" href="http://www.oecd-nea.org/dbdata/pubs/jeff312-cd.html">here</a>. To use this data with NDPP,
the following steps must be taken:</p>
<ol class="arabic">
<li><p class="first">Copy and unzip the data on the DVD to a directory on your computer.</p>
</li>
<li><p class="first">In the root directory, a file named <tt class="docutils literal"><span class="pre">xsdir</span></tt>, or some variant thereof,
should be present. This file contains a listing of all the cross sections and
is used by MCNP. This file should be converted to a <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt>
file for use with NDPP. A Python script is provided in the NDPP
distribution for this purpose:</p>
<div class="highlight-sh"><div class="highlight"><pre>ndpp/src/utils/convert_xsdir.py xsdir31 cross_sections.xml
</pre></div>
</div>
</li>
<li><p class="first">In the converted <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file, change the contents of the
&lt;directory&gt; element to the absolute path of the directory containing the
actual ACE files.</p>
</li>
<li><p class="first">Additionally, you may need to change any occurrences of upper-case &#8220;ACE&#8221;
within the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file to lower-case.</p>
</li>
<li><p class="first">Either set the <a class="reference internal" href="input.html#cross-sections"><em>&lt;cross_sections&gt; Element</em></a> in a settings.xml file or the
<span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt> environment variable to the absolute path of the
<tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file.</p>
</li>
</ol>
</div>
<div class="section" id="using-cross-sections-from-mcnp">
<h3>1.2.3. Using Cross Sections from MCNP<a class="headerlink" href="#using-cross-sections-from-mcnp" title="Permalink to this headline">¶</a></h3>
<p>To use cross sections distributed with MCNP, change the &lt;directory&gt; element in
the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file in the root directory of the NDPP distribution
to the location of the MCNP cross sections. Then, either set the
<a class="reference internal" href="input.html#cross-sections"><em>&lt;cross_sections&gt; Element</em></a> in a settings.xml file or the <span class="target" id="index-2"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt>
environment variable to the absolute path of the <tt class="docutils literal"><span class="pre">cross_sections.xml</span></tt> file.</p>
</div>
<div class="section" id="using-cross-sections-from-serpent">
<h3>1.2.4. Using Cross Sections from Serpent<a class="headerlink" href="#using-cross-sections-from-serpent" title="Permalink to this headline">¶</a></h3>
<p>To use cross sections distributed with Serpent, change the &lt;directory&gt; element
in the <tt class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></tt> file in the root directory of the NDPP
distribution to the location of the Serpent cross sections. Then, either set the
<a class="reference internal" href="input.html#cross-sections"><em>&lt;cross_sections&gt; Element</em></a> in a settings.xml file or the <span class="target" id="index-3"></span><tt class="xref std std-envvar docutils literal"><span class="pre">CROSS_SECTIONS</span></tt>
environment variable to the absolute path of the <tt class="docutils literal"><span class="pre">cross_sections_serpent.xml</span></tt>
file.</p>
</div>
</div>
<div class="section" id="running-ndpp">
<h2>1.3. Running NDPP<a class="headerlink" href="#running-ndpp" title="Permalink to this headline">¶</a></h2>
<p>Once an NDPP input file has been created (see <a class="reference internal" href="input.html#usersguide-input"><em>Writing XML Input Files</em></a>), you can
either run the <tt class="docutils literal"><span class="pre">ndpp</span></tt> executable directly from the directory containing your
XML input files, or you can specify as a command-line argument the directory containing
the XML input files. For example, if the path of your NDPP executable is
<tt class="docutils literal"><span class="pre">/home/username/ndpp/src/ndpp</span></tt> and your XML input files are in the
directory <tt class="docutils literal"><span class="pre">/path/to/somemodel</span></tt>, one way to run the simulation would be:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd</span> /path/to/somemodel
ndpp
</pre></div>
</div>
<p>Alternatively, you could run from any directory:</p>
<div class="highlight-sh"><div class="highlight"><pre>ndpp /path/to/someplace
</pre></div>
</div>
<p>Note that in the latter case, any output files will be placed in the present
working directory which may be different from <tt class="docutils literal"><span class="pre">/path/to/somemodel</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="input.html" title="2. Writing XML Input Files"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="User’s Guide"
             >previous</a> |</li>
        <li><a href="../index.html">NDPP Documentation</a> &raquo;</li>
          <li><a href="index.html" >User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013-2014, Adam G Nelson and Contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30411614-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>